#
# Makefile make_sarta for SARTA
#

# ------------------------------------------------------------------------
# Object files
# ------------------------------------------------------------------------
OBJS = rdcoef_nh3.o  rdprof_nh3.o calt1_nh3.o calt2_nh3.o calt3_nh3.o \
	calpar_nh3.o opnrtp_nh3.o rdrtp_nh3.o \
	vaconv.o qikexp.o  setems.o  getbot.o \
	calt4.o   calt5.o   calt6.o   calt7.o \
	faketz.o  sunpar.o  calrad.o  rdsun.o   saconv.o  calowp.o  calokw.o \
	util.o    wrtrtp.o  mean_t.o  rdinfo.o  cbplev.o \
	tunmlt.o  calnte.o  sarta_nh3.o


# ------------------------------------------------------------------------
# UMBC HDF LIBS
# ------------------------------------------------------------------------
HDFLIB = -L/asl/code/external/hdf/hdf4/lib -ldf \
	-L/asl/code/external/jpeg -ljpeg       \
	-L/asl/code/external/zlib -lz   
#	-L/asl/code/external/szip/lib -lsz

# ------------------------------------------------------------------------
# RTP LIB and INCLUDE
# ------------------------------------------------------------------------
RTPLIB = -L/home/chepplew/myLib/rtp/lib -lrtp
RTPINC = -I/home/chepplew/myLib/rtp/include
#RTPLIB = -L/asl/packages/rtpV201/lib -lrtp
#RTPINC = -I/asl/packages/rtpV201/include

# ------------------------------------------------------------------------
# Compilers
# ------------------------------------------------------------------------

# INTEL ifort F77
# ------------------------------------------------------------------------
F77 = ifort
FLIB = 
OPT = -O -convert big_endian -extend-source 132
#-check all -g -silent

# gfortran
# ------------------------------------------------------------------------
#F77 = gfortran
#OPT = -fdec-structure -fconvert=swap
#OPT = -fconvert=swap -ffixed-line-length-132 -ffixed-form -fall-intrinsics

# ------------
# JPL Linux absoft: 
#    -s    static allocation
#    -N26  read big-endian binary files (needed for coefficient files)
#OPT = -s -O1 -N26
# Absoft requires the U77 library
#FLIB = -lU77
#F77 = /opt/absoft11.5/bin/f90

# Portland Group F77:
# ------------------------------------------------------------------------
#    -byteswapio  read big-endian binary files (needed for coefficient files)
#    -C           array bounds checking
#    -g           include symbol table info
#    -O           moderate optimization
#OPT = -O -byteswapio
#F77 = pgf77

# ------------------------------------------------------------------------
# Build
# ------------------------------------------------------------------------
sarta:	$(OBJS)
	$(F77) $(OBJS) $(RTPLIB) $(HDFLIB) $(FLIB)

# Compile source to object files
.f.o:
	$(F77) -c $(OPT) $(RTPINC) $*.f
